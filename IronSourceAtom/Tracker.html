<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: IronSourceAtom::Tracker
  
    &mdash; Documentation by YARD 0.9.0
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "IronSourceAtom::Tracker";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (T)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../IronSourceAtom.html" title="IronSourceAtom (module)">IronSourceAtom</a></span></span>
     &raquo; 
    <span class="title">Tracker</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="../class_list.html"></iframe>

      <div id="content"><h1>Class: IronSourceAtom::Tracker
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">IronSourceAtom::Tracker</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/atom_ruby/tracker.rb</dd>
  </dl>
  
</div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Tracker/Event.html" title="IronSourceAtom::Tracker::Event (class)">Event</a></span>
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auth%3D-instance_method" title="#auth= (instance method)">#<strong>auth=</strong>(auth)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets pre shared auth key for Atom stream * <code>auth</code> String pre
shared auth key.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bulk_size%3D-instance_method" title="#bulk_size= (instance method)">#<strong>bulk_size=</strong>(bulk_size)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets number of events in bulk.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bulk_size_byte%3D-instance_method" title="#bulk_size_byte= (instance method)">#<strong>bulk_size_byte=</strong>(bulk_size_byte)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets bulk size of events in bytes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#event_worker-instance_method" title="#event_worker (instance method)">#<strong>event_worker</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#flush-instance_method" title="#flush (instance method)">#<strong>flush</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Flush all data buffer to server immediately.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#flush_data-instance_method" title="#flush_data (instance method)">#<strong>flush_data</strong>(stream, data)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#flush_interval%3D-instance_method" title="#flush_interval= (instance method)">#<strong>flush_interval=</strong>(flush_interval)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the time in seconds for flushing data to Atom.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(url = &quot;http://track.atom-data.io/&quot;)  &#x21d2; Tracker </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new instance of Tracker.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#task_pool_size%3D-instance_method" title="#task_pool_size= (instance method)">#<strong>task_pool_size=</strong>(task_pool_size)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the capacity of task queue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#task_workers_count%3D-instance_method" title="#task_workers_count= (instance method)">#<strong>task_workers_count=</strong>(task_workers_count)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the quantity of workers sending data to Atom.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#track-instance_method" title="#track (instance method)">#<strong>track</strong>(data, stream)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Track data to server.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(url = &quot;http://track.atom-data.io/&quot;)  &#x21d2; <tt><span class='object_link'><a href="" title="IronSourceAtom::Tracker (class)">Tracker</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new instance of Tracker.</p>
<ul><li>
<p><code>auth</code> is the pre shared auth key for your Atom. Required.</p>
</li><li>
<p><code>url</code> atom traker endpoint url.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/atom_ruby/tracker.rb', line 13</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://track.atom-data.io/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@bulk_size_byte</span> <span class='op'>=</span> <span class='int'>64</span><span class='op'>*</span><span class='int'>1024</span>
  <span class='ivar'>@bulk_size</span> <span class='op'>=</span> <span class='int'>4</span>
  <span class='ivar'>@task_workers_count</span> <span class='op'>=</span> <span class='int'>20</span>
  <span class='ivar'>@task_pool_size</span> <span class='op'>=</span> <span class='int'>10000</span>
  <span class='ivar'>@flush_interval</span> <span class='op'>=</span> <span class='int'>10</span>
  <span class='ivar'>@url</span> <span class='op'>=</span><span class='id identifier rubyid_url'>url</span>
  <span class='ivar'>@auth</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@streams</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@atom</span> <span class='op'>=</span> <span class='const'>Atom</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@flush_now</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@event_worker_thread</span><span class='op'>=</span><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_event_worker'>event_worker</span> <span class='rbrace'>}</span>
  <span class='ivar'>@event_pool</span> <span class='op'>=</span> <span class='const'>EventTaskPool</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@task_workers_count</span><span class='comma'>,</span> <span class='ivar'>@task_pool_size</span><span class='rparen'>)</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="auth=-instance_method">
  
    #<strong>auth=</strong>(auth)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets pre shared auth key for Atom stream</p>
<ul><li>
<p><code>auth</code> String pre shared auth key</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/atom_ruby/tracker.rb', line 31</span>

<span class='kw'>def</span> <span class='id identifier rubyid_auth='>auth=</span><span class='lparen'>(</span><span class='id identifier rubyid_auth'>auth</span><span class='rparen'>)</span>
  <span class='ivar'>@auth</span> <span class='op'>=</span> <span class='id identifier rubyid_auth'>auth</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bulk_size=-instance_method">
  
    #<strong>bulk_size=</strong>(bulk_size)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets number of events in bulk</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/atom_ruby/tracker.rb', line 41</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bulk_size='>bulk_size=</span><span class='lparen'>(</span><span class='id identifier rubyid_bulk_size'>bulk_size</span><span class='rparen'>)</span>
  <span class='ivar'>@bulk_size</span> <span class='op'>=</span> <span class='id identifier rubyid_bulk_size'>bulk_size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bulk_size_byte=-instance_method">
  
    #<strong>bulk_size_byte=</strong>(bulk_size_byte)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets bulk size of events in bytes</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/atom_ruby/tracker.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bulk_size_byte='>bulk_size_byte=</span><span class='lparen'>(</span><span class='id identifier rubyid_bulk_size_byte'>bulk_size_byte</span><span class='rparen'>)</span>
  <span class='ivar'>@bulk_size_byte</span> <span class='op'>=</span> <span class='id identifier rubyid_bulk_size_byte'>bulk_size_byte</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="event_worker-instance_method">
  
    #<strong>event_worker</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/atom_ruby/tracker.rb', line 75</span>

<span class='kw'>def</span> <span class='id identifier rubyid_event_worker'>event_worker</span>
  <span class='id identifier rubyid_timer_start_time'>timer_start_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
  <span class='id identifier rubyid_timer_delta_time'>timer_delta_time</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_events_size'>events_size</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_events_buffer'>events_buffer</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_flush_event'>flush_event</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='id identifier rubyid_auth'>auth</span><span class='comma'>,</span> <span class='id identifier rubyid_buffer'>buffer</span><span class='op'>|</span>
    <span class='id identifier rubyid_buffer_to_flush'>buffer_to_flush</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_buffer'>buffer</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span>
    <span class='id identifier rubyid_buffer'>buffer</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
    <span class='id identifier rubyid_events_size'>events_size</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream'>stream</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_timer_delta_time'>timer_delta_time</span> <span class='op'>=</span> <span class='int'>0</span><span class='semicolon'>;</span>
    <span class='ivar'>@event_pool</span><span class='period'>.</span><span class='id identifier rubyid_add_task'>add_task</span><span class='lparen'>(</span><span class='const'>Proc</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_flush_data'>flush_data</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='id identifier rubyid_buffer_to_flush'>buffer_to_flush</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>while</span> <span class='kw'>true</span>
    <span class='kw'>for</span> <span class='id identifier rubyid_stream'>stream</span> <span class='kw'>in</span> <span class='ivar'>@streams</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
      <span class='id identifier rubyid_timer_delta_time'>timer_delta_time</span> <span class='op'>+=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>-</span> <span class='id identifier rubyid_timer_start_time'>timer_start_time</span>
      <span class='id identifier rubyid_timer_start_time'>timer_start_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='ivar'>@streams</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream'>stream</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='op'>==</span><span class='kw'>nil</span>
        <span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='float'>0.1</span><span class='rparen'>)</span>
        <span class='kw'>next</span>
      <span class='kw'>end</span>

      <span class='kw'>unless</span> <span class='id identifier rubyid_events_size'>events_size</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span> <span class='id identifier rubyid_stream'>stream</span>
        <span class='id identifier rubyid_events_size'>events_size</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='kw'>unless</span> <span class='id identifier rubyid_events_buffer'>events_buffer</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span> <span class='id identifier rubyid_stream'>stream</span>
        <span class='id identifier rubyid_events_buffer'>events_buffer</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_events_size'>events_size</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream'>stream</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='id identifier rubyid_value'>value</span><span class='lbracket'>[</span><span class='symbol'>:data</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_bytesize'>bytesize</span>
      <span class='id identifier rubyid_events_buffer'>events_buffer</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream'>stream</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span> <span class='id identifier rubyid_value'>value</span><span class='lbracket'>[</span><span class='symbol'>:data</span><span class='rbracket'>]</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_events_size'>events_size</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream'>stream</span><span class='rbracket'>]</span> <span class='op'>&gt;=</span> <span class='ivar'>@bulk_size_byte</span>
        <span class='id identifier rubyid_flush_event'>flush_event</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='ivar'>@auth</span><span class='comma'>,</span> <span class='id identifier rubyid_events_buffer'>events_buffer</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream'>stream</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_events_buffer'>events_buffer</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream'>stream</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;=</span> <span class='ivar'>@bulk_size</span>
        <span class='id identifier rubyid_flush_event'>flush_event</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='ivar'>@auth</span><span class='comma'>,</span> <span class='id identifier rubyid_events_buffer'>events_buffer</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream'>stream</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='kw'>if</span> <span class='ivar'>@flush_now</span>
        <span class='id identifier rubyid_flush_event'>flush_event</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='ivar'>@auth</span><span class='comma'>,</span> <span class='id identifier rubyid_events_buffer'>events_buffer</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream'>stream</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>end</span>


      <span class='kw'>if</span> <span class='id identifier rubyid_timer_delta_time'>timer_delta_time</span> <span class='op'>&gt;=</span> <span class='ivar'>@flush_interval</span>
        <span class='id identifier rubyid_timer_delta_time'>timer_delta_time</span> <span class='op'>=</span> <span class='int'>0</span>
        <span class='id identifier rubyid_flush_event'>flush_event</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='ivar'>@auth</span><span class='comma'>,</span> <span class='id identifier rubyid_events_buffer'>events_buffer</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream'>stream</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='ivar'>@flush_now</span>
      <span class='ivar'>@flush_now</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="flush-instance_method">
  
    #<strong>flush</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Flush all data buffer to server immediately</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/atom_ruby/tracker.rb', line 150</span>

<span class='kw'>def</span> <span class='id identifier rubyid_flush'>flush</span>
  <span class='ivar'>@flush_now</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="flush_data-instance_method">
  
    #<strong>flush_data</strong>(stream, data)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


137
138
139
140
141
142
143
144
145
146
147</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/atom_ruby/tracker.rb', line 137</span>

<span class='kw'>def</span> <span class='id identifier rubyid_flush_data'>flush_data</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
  <span class='ivar'>@atom</span><span class='period'>.</span><span class='id identifier rubyid_auth'>auth</span> <span class='op'>=</span> <span class='ivar'>@auth</span>
  <span class='id identifier rubyid_back_off'>back_off</span><span class='op'>=</span><span class='const'>BackOff</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='kw'>while</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_response'>response</span><span class='op'>=</span><span class='ivar'>@atom</span><span class='period'>.</span><span class='id identifier rubyid_put_events'>put_events</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span> <span class='op'>&lt;</span> <span class='int'>500</span>
      <span class='kw'>return</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_sleep'>sleep</span> <span class='id identifier rubyid_back_off'>back_off</span><span class='period'>.</span><span class='id identifier rubyid_retry_time'>retry_time</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="flush_interval=-instance_method">
  
    #<strong>flush_interval=</strong>(flush_interval)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the time in seconds for flushing data to Atom</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/atom_ruby/tracker.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_flush_interval='>flush_interval=</span><span class='lparen'>(</span><span class='id identifier rubyid_flush_interval'>flush_interval</span><span class='rparen'>)</span>
  <span class='ivar'>@flush_interval</span> <span class='op'>=</span> <span class='id identifier rubyid_flush_interval'>flush_interval</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="task_pool_size=-instance_method">
  
    #<strong>task_pool_size=</strong>(task_pool_size)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the capacity of task queue</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/atom_ruby/tracker.rb', line 51</span>

<span class='kw'>def</span> <span class='id identifier rubyid_task_pool_size='>task_pool_size=</span><span class='lparen'>(</span><span class='id identifier rubyid_task_pool_size'>task_pool_size</span><span class='rparen'>)</span>
  <span class='ivar'>@task_pool_size</span> <span class='op'>=</span> <span class='id identifier rubyid_task_pool_size'>task_pool_size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="task_workers_count=-instance_method">
  
    #<strong>task_workers_count=</strong>(task_workers_count)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the quantity of workers sending data to Atom</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/atom_ruby/tracker.rb', line 46</span>

<span class='kw'>def</span> <span class='id identifier rubyid_task_workers_count='>task_workers_count=</span><span class='lparen'>(</span><span class='id identifier rubyid_task_workers_count'>task_workers_count</span><span class='rparen'>)</span>
  <span class='ivar'>@task_workers_count</span> <span class='op'>=</span> <span class='id identifier rubyid_task_workers_count'>task_workers_count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="track-instance_method">
  
    #<strong>track</strong>(data, stream)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Track data to server</p>
<ul><li>
<p><code>data</code> info for sending</p>
</li><li>
<p><code>stream</code> is the Name of the stream</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


65
66
67
68
69
70
71
72
73</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/atom_ruby/tracker.rb', line 65</span>

<span class='kw'>def</span> <span class='id identifier rubyid_track'>track</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@streams</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span> <span class='id identifier rubyid_stream'>stream</span>
    <span class='ivar'>@streams</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream'>stream</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span> <span class='const'>Event</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_events_queue'>events_queue</span> <span class='op'>=</span> <span class='const'>Queue</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_events_queue'>events_queue</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span> <span class='const'>Event</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
    <span class='ivar'>@streams</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='id identifier rubyid_events_queue'>events_queue</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Jul 15 17:36:52 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.0 (ruby-2.0.0).
</div>

    </div>
  </body>
</html>